<p align="center">
<a href="[https://laravel.com](https://laravel.com)" target="_blank">
<img src="https://raw.githubusercontent.com/laravel/art/master/logo-lockup/5%20SVG/2%20CMYK/1%20Full%20Color/laravel-logolockup-cmyk-red.svg" width="400" alt="Laravel Logo">
</a>
</p>

<div align="center">

# Proyecto Hermes (Wonderlust)

### **FundaciÃ³n Universitaria TecnolÃ³gico Comfenalco**

</div>

<p align="center">
<img alt="PHP" src="https://img.shields.io/badge/PHP-8.1%2B-777BB4?style=for-the-badge&logo=php">
<img alt="Laravel" src="https://img.shields.io/badge/Laravel-10.x-FF2D20?style=for-the-badge&logo=laravel">
<img alt="MySQL" src="https://img.shields.io/badge/MySQL-8.0-4479A1?style=for-the-badge&logo=mysql">
<img alt="License" src="https://img.shields.io/badge/License-MIT-green.svg?style=for-the-badge">
</p>

---

## ğŸš€ DescripciÃ³n

**Hermes (Wonderlust)** es una plataforma para la gestiÃ³n de InternacionalizaciÃ³n de Eventos, diseÃ±ada para que los usuarios de la **FundaciÃ³n Universitaria TecnolÃ³gico Comfenalco** puedan administrar eventos, convenios y actividades acadÃ©micas internacionales.

La aplicaciÃ³n estÃ¡ construida con **Laravel 10** y sigue una arquitectura moderna para facilitar su desarrollo y mantenimiento.

---

## âœ¨ CaracterÃ­sticas Principales

### ğŸŒ GestiÃ³n de InternacionalizaciÃ³n

-   **Eventos Internacionales**: CreaciÃ³n, gestiÃ³n y seguimiento de eventos acadÃ©micos.
-   **Control de Asistencia**: Sistema automatizado para registrar participantes en tiempo real.
-   **Reportes para SNIES**: GeneraciÃ³n automÃ¡tica de reportes de participaciÃ³n.

### ğŸ¤ GestiÃ³n de Convenios

-   **Acuerdos Multinstitucionales**: AdministraciÃ³n de convenios y alianzas acadÃ©micas.
-   **Actividades AcadÃ©micas**: Seguimiento de intercambios y colaboraciones.
-   **Reportes**: EstadÃ­sticas y anÃ¡lisis de actividades internacionales.

### ğŸ‘¥ Sistema de Usuarios

-   **Roles y Permisos**: Sistema granular de autorizaciÃ³n basado en roles.
-   **AutenticaciÃ³n Segura**: Login con verificaciÃ³n de dos factores (2FA).
-   **GestiÃ³n de Perfiles**: AdministraciÃ³n centralizada de datos de usuarios.

### ğŸ“Š Dashboard Interactivo

-   **Componentes Livewire**: GrÃ¡ficos y mÃ©tricas que se actualizan en tiempo real.
-   **Mapas Interactivos**: VisualizaciÃ³n geogrÃ¡fica de actividades y convenios.
    -\_ **EstadÃ­sticas**: MÃ©tricas y KPIs clave del sistema.

### ğŸ“§ Sistema de ComunicaciÃ³n

-   **Encuestas por Email**: EnvÃ­o automatizado de encuestas de satisfacciÃ³n.
-   **Notificaciones**: Alertas y recordatorios automÃ¡ticos para eventos y tareas.
-   **Plantillas de Correo**: Templates personalizables para una comunicaciÃ³n consistente.

---

## ğŸ› ï¸ TecnologÃ­as Utilizadas

<table>
<thead>
<tr>
<th width="120px">TecnologÃ­a</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<img src="https://laravel.com/img/logomark.min.svg" alt="Laravel" width="80">
</td>
<td>
<b>Laravel Framework</b>
<p>Framework de PHP con una sintaxis elegante y herramientas poderosas para el desarrollo rÃ¡pido y seguro de aplicaciones web.</p>
</td>
</tr>
<tr>
<td>
<img src="https://getcomposer.org/img/logo-composer-transparent5.png" alt="Composer" width="100">
</td>
<td>
<b>Composer</b>
<p>Gestor de dependencias para PHP, utilizado para administrar las bibliotecas y paquetes del proyecto.</p>
</td>
</tr>
<tr>
<td>
<img src="https://www.mysql.com/common/logos/logo-mysql-170x115.png" alt="MySQL" width="100">
</td>
<td>
<b>MySQL</b>
<p>Sistema de gestiÃ³n de bases de datos relacional para almacenar y gestionar los datos. TambiÃ©n soporta SQLite para desarrollo local.</p>
</td>
</tr>
<tr>
<td>
<img src="https://nodejs.org/static/images/logo.svg" alt="Node.js" width="100">
</td>
<td>
<b>Node.js & Vite</b>
<p>Entorno de ejecuciÃ³n para JavaScript del lado del servidor. Se utiliza para gestionar las dependencias del frontend y compilar assets con Vite.</p>
</td>
</tr>
<tr>
<td>
<img src="https://upload.wikimedia.org/wikipedia/commons/9/95/Tailwind_CSS_logo.svg" alt="Tailwind CSS" width="100">
</td>
<td>
<b>Tailwind CSS</b>
<p>Framework de CSS <i>utility-first</i> para crear interfaces de usuario modernas y responsivas de manera eficiente.</p>
</td>
</tr>
<tr>
<td>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b2/Cloudflare_Turnstile_logo.svg/1200px-Cloudflare_Turnstile_logo.svg.png" width="100">
</td>
<td>
<b>Cloudflare Turnstile</b>
<p>Alternativa a los CAPTCHAs tradicionales que distingue entre humanos y bots sin fricciÃ³n para el usuario, mejorando la seguridad y la experiencia.</p>
</td>
</tr>
<tr>
<td>
<img src="https://choices-js.github.io/Choices/assets/images/logo.svg" alt="Choices.js" width="80">
</td>
<td>
<b>Choices.js</b>
<p>Biblioteca de JavaScript para crear selectores y campos de entrada personalizables y amigables con el usuario.</p>
</td>
</tr>
</tbody>
</table>

---

## ğŸ“‹ Requisitos Previos

AsegÃºrate de tener instalados los siguientes requisitos en tu entorno de desarrollo:

-   [PHP](https://www.php.net/downloads) (versiÃ³n `>=8.1`)
-   [Composer](https://getcomposer.org/download/)
-   [MySQL](https://www.mysql.com/downloads/) o [PostgreSQL](https://www.postgresql.org/download/)
-   [Node.js](https://nodejs.org/) (versiÃ³n `>=18.0`) y NPM
-   [Credenciales de Cloudflare Turnstile](https://developers.cloudflare.com/turnstile/get-started/)

---

## ğŸš€ InstalaciÃ³n y ConfiguraciÃ³n

Sigue estos pasos para configurar el proyecto en tu mÃ¡quina local.

**1. Clona el repositorio:**

```bash
git clone https://github.com/DJAYI/Atlas
cd Atlas
```

**2. Instala las dependencias de PHP:**

```bash
composer install
```

**3. Configura tu archivo de entorno:**

```bash
cp .env.example .env
```

Abre el archivo `.env` y configura tus variables, especialmente la base de datos, el correo y las claves de Turnstile.

```env
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=hermes_db
DB_USERNAME=root
DB_PASSWORD=

# Claves de Cloudflare Turnstile
TURNSTILE_SITE_KEY=tu_site_key
TURNSTILE_SECRET_KEY=tu_secret_key

# ConfiguraciÃ³n de correo (ej. Mailtrap o SMTP real)
MAIL_MAILER=smtp
MAIL_HOST=sandbox.smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=tu_usuario_mailtrap
MAIL_PASSWORD=tu_contraseÃ±a_mailtrap
MAIL_FROM_ADDRESS="no-reply@tecnologicocomfenalco.edu.co"
MAIL_FROM_NAME="${APP_NAME}"
```

**4. Genera la clave de la aplicaciÃ³n:**

```bash
php artisan key:generate
```

**5. Ejecuta las migraciones y los seeders:**
Esto crearÃ¡ la estructura de la base de datos y la llenarÃ¡ con datos de prueba.

```bash
php artisan migrate --seed
```

**6. Instala las dependencias de Node.js y compila los assets:**

```bash
npm install && npm run build
```

**7. Inicia el servidor de desarrollo:**

```bash
php artisan serve
```

Â¡Listo! La aplicaciÃ³n estarÃ¡ disponible en `http://127.0.0.1:8000`.

---

### ConfiguraciÃ³n Adicional: Certificado SSL (`cacert.pem`)

> Necesario para entornos locales en Windows, configurar el archivo php.ini para realizar peticiones externas.

Para evitar errores de SSL/TLS al conectar con APIs externas (especialmente en Windows), configura el certificado raÃ­z de `curl`.

1.  **Descarga `cacert.pem`** en la carpeta `storage`:
    ```bash
    curl https://curl.se/ca/cacert.pem -o storage/cacert.pem
    ```
2.  **Edita tu `php.ini`** y aÃ±ade las siguientes lÃ­neas (asegÃºrate de usar la ruta absoluta correcta):

    ```ini
    [curl]
    curl.cainfo = "C:/ruta/completa/a/Atlas/storage/cacert.pem"

    [openssl]
    openssl.cafile = "C:/ruta/completa/a/Atlas/storage/cacert.pem"
    ```

---

## ğŸ§ª Testing

El proyecto utiliza Pest para las pruebas automatizadas.

```bash
# Ejecutar todos los tests
php artisan test

# Ejecutar tests con cobertura de cÃ³digo
php artisan test --coverage
```

---

## âš™ï¸ Comandos Ãštiles

### Desarrollo

```bash
# Compilar assets en modo desarrollo con hot-reloading
npm run dev

# Limpiar toda la cachÃ© de Laravel
php artisan optimize:clear
```

### Generadores de CÃ³digo

```bash
# Crear un nuevo componente Livewire
php artisan make:livewire ComponentName

# Crear un nuevo modelo con su migraciÃ³n
php artisan make:model ModelName -m

# Crear una nueva clase de correo electrÃ³nico
php artisan make:mail MailName
```

---

## ğŸ”§ SoluciÃ³n de Problemas Comunes

-   **Error de permisos en `storage` o `bootstrap/cache`:**

    ```bash
    chmod -R 775 storage bootstrap/cache
    ```

-   **Error `cURL error 60: SSL certificate problem`:**
    AsegÃºrate de haber configurado correctamente el `cacert.pem` como se indica en la secciÃ³n de instalaciÃ³n.

-   **Problemas con dependencias (PHP o JS):**

    ```bash
    # Para PHP
    composer dump-autoload

    # Para JS
    rm -rf node_modules package-lock.json
    npm install
    npm run build
    ```

---

## ğŸŒ ConfiguraciÃ³n para ProducciÃ³n (Despliegue)

### Apache

1.  AsegÃºrate de que `mod_rewrite` estÃ© habilitado.

2.  Configura el _Virtual Host_ para que apunte a la carpeta `public`.

3.  Utiliza el siguiente `.htaccess` en la carpeta `public/` (ajusta `RewriteBase` si el proyecto estÃ¡ en un subdirectorio).

    ```apache
    <IfModule mod_rewrite.c>
        RewriteEngine On
        # Si la app estÃ¡ en una subcarpeta (ej. /hermes), descomenta la siguiente lÃ­nea
        # RewriteBase /hermes/public/
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^ index.php [L]
    </IfModule>
    ```

### Nginx

Usa la siguiente configuraciÃ³n de servidor, apuntando la raÃ­z a la carpeta `public/`.

```nginx
server {
    listen 80;
    server_name tu-dominio.com;
    root /var/www/hermes/public; # Ruta a tu proyecto

    index index.php;
    charset utf-8;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location ~ .php$ {
        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock; # Ajusta la versiÃ³n de PHP
        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
        include fastcgi_params;
    }

    location ~ /.ht {
        deny all;
    }
}
```

### OptimizaciÃ³n para ProducciÃ³n

Antes de desplegar, ejecuta estos comandos para optimizar el rendimiento:

```bash
composer install --no-dev --optimize-autoloader
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

---

## ğŸ”„ ConfiguraciÃ³n de Workers (Systemd)

Para procesar tareas en segundo plano (como el envÃ­o de correos) en un servidor Linux, puedes usar `systemd`.

1.  **Crea el archivo de servicio** en `/etc/systemd/system/hermes-worker.service`:

    ```ini
    [Unit]
    Description=Hermes Queue Worker
    After=network.target

    [Service]
    User=apache          # Usuario que ejecuta el servidor web (www-data en Debian/Ubuntu)
    Group=apache         # Grupo del usuario (www-data en Debian/Ubuntu)
    Restart=always
    ExecStart=/usr/bin/php /var/www/hermes/artisan queue:work --sleep=3 --tries=3
    WorkingDirectory=/var/www/hermes

    [Install]
    WantedBy=multi-user.target
    ```

2.  **Activa e inicia el servicio:**

    ```bash
    # Recargar systemd
    sudo systemctl daemon-reload

    # Habilitar el worker para que inicie con el sistema
    sudo systemctl enable hermes-worker.service

    # Iniciar el worker ahora
    sudo systemctl start hermes-worker.service

    # Verificar el estado
    sudo systemctl status hermes-worker.service
    ```

---

## ğŸ“ Estructura del Proyecto

El proyecto sigue la estructura estÃ¡ndar de Laravel, con algunas adiciones clave para organizar la lÃ³gica de negocio.

```
hermes/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Console/
â”‚   â”œâ”€â”€ Enums/            # Enumeraciones para tipos de datos (Modalidad, UbicaciÃ³n, etc.)
â”‚   â”œâ”€â”€ Exports/          # Clases para exportaciÃ³n de datos (Excel, CSV)
â”‚   â”œâ”€â”€ Http/
â”‚   â”œâ”€â”€ Jobs/             # Tareas en cola (ej. SendSurveyEmailJob)
â”‚   â”œâ”€â”€ Livewire/         # Componentes interactivos de Livewire
â”‚   â”œâ”€â”€ Mail/             # Clases de correo electrÃ³nico
â”‚   â”œâ”€â”€ Models/           # Modelos Eloquent con sus relaciones
â”‚   â””â”€â”€ Services/         # LÃ³gica de negocio desacoplada
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ factories/
â”‚   â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ seeders/
â”œâ”€â”€ resources/
â”‚   â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ lang/             # Archivos de traducciÃ³n (es, en)
â”‚   â””â”€â”€ views/            # Vistas Blade y componentes
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ auth.php
â”‚   â””â”€â”€ web.php
â””â”€â”€ ...
```
