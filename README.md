<p align="center">
<a href="https://www.tecnologicocomfenalco.edu.co" target="_blank">
<img src="https://tecnologicocomfenalco.edu.co//wp-content/uploads/2025/02/Logo-1-01.png" width="400" alt="TecnolÃ³gico Comfenalco Logo">
</a>
</p>

<div align="center">

# Proyecto Hermes (Wonderlust)

### **FundaciÃ³n Universitaria TecnolÃ³gico Comfenalco**

</div>

<p align="center">
<img alt="PHP" src="https://img.shields.io/badge/PHP-8.1%2B-777BB4?style=for-the-badge&logo=php">
<img alt="Laravel" src="https://img.shields.io/badge/Laravel-12.x-FF2D20?style=for-the-badge&logo=laravel">
<img alt="Postgres" src="https://img.shields.io/badge/Postgres-8.4-4479A1?style=for-the-badge&logo=postgresql">
<img alt="License" src="https://img.shields.io/badge/License-MIT-green.svg?style=for-the-badge">
</p>

---

## ğŸš€ DescripciÃ³n

**Hermes (Wonderlust)** es una plataforma para la gestiÃ³n de InternacionalizaciÃ³n de Eventos, diseÃ±ada para que los usuarios de la **FundaciÃ³n Universitaria TecnolÃ³gico Comfenalco** puedan administrar eventos, convenios y actividades acadÃ©micas internacionales.

La aplicaciÃ³n estÃ¡ construida con **Laravel 12** y sigue una arquitectura moderna para facilitar su desarrollo y mantenimiento.

---

## âœ¨ CaracterÃ­sticas Principales

### ğŸŒ GestiÃ³n de InternacionalizaciÃ³n

-   **Eventos Internacionales**: CreaciÃ³n, gestiÃ³n y seguimiento de eventos acadÃ©micos.
-   **Control de Asistencia**: Sistema automatizado para registrar participantes en tiempo real.
-   **Reportes para SNIES**: GeneraciÃ³n automÃ¡tica de reportes de participaciÃ³n.

### ğŸ¤ GestiÃ³n de Convenios

-   **Acuerdos Multinstitucionales**: AdministraciÃ³n de convenios y alianzas acadÃ©micas.
-   **Actividades AcadÃ©micas**: Seguimiento de intercambios y colaboraciones.
-   **Reportes**: EstadÃ­sticas y anÃ¡lisis de actividades internacionales.

### ğŸ‘¥ Sistema de Usuarios

-   **Roles y Permisos**: Sistema granular de autorizaciÃ³n basado en roles.
-   **AutenticaciÃ³n Segura**: Login con verificaciÃ³n de dos factores (2FA).
-   **GestiÃ³n de Perfiles**: AdministraciÃ³n centralizada de datos de usuarios.

### ğŸ“Š Dashboard Interactivo

-   **Componentes Livewire**: GrÃ¡ficos y mÃ©tricas que se actualizan en tiempo real.
-   **Mapas Interactivos**: VisualizaciÃ³n geogrÃ¡fica de actividades y convenios.
    -\_ **EstadÃ­sticas**: MÃ©tricas y KPIs clave del sistema.

### ğŸ“§ Sistema de ComunicaciÃ³n

-   **Encuestas por Email**: EnvÃ­o automatizado de encuestas de satisfacciÃ³n.
-   **Notificaciones**: Alertas y recordatorios automÃ¡ticos para eventos y tareas.
-   **Plantillas de Correo**: Templates personalizables para una comunicaciÃ³n consistente.

---

## ğŸ› ï¸ TecnologÃ­as Utilizadas

<table>
<thead>
<tr>
<th width="120px">TecnologÃ­a</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<img src="https://laravel.com/img/logomark.min.svg" alt="Laravel" width="80">
</td>
<td>
<b>Laravel Framework</b>
<p>Framework MVC de PHP basado en el patrÃ³n arquitectÃ³nico Model-View-Controller. Implementa el patrÃ³n Active Record mediante Eloquent ORM, incluye un motor de plantillas Blade, sistema de migraciones para versionado de base de datos, inyecciÃ³n de dependencias IoC, middleware para filtrado de requests HTTP, y un sistema de enrutamiento RESTful avanzado.</p>
</td>
</tr>
<tr>
<td>
<img src="https://getcomposer.org/img/logo-composer-transparent5.png" alt="Composer" width="100">
</td>
<td>
<b>Composer</b>
<p>Gestor de dependencias para PHP que utiliza archivos JSON para definir librerÃ­as requeridas. Implementa PSR-4 autoloading, resoluciÃ³n de dependencias con algoritmo SAT solver, versionado semÃ¡ntico, y generaciÃ³n de autoload optimizado con classmap y PSR-0/PSR-4 para mejorar el rendimiento de carga de clases.</p>
</td>
</tr>
<tr>
<td>
<img src="https://upload.wikimedia.org/wikipedia/commons/2/29/Postgresql_elephant.svg" alt="PostgreSQL" width="100">
</td>
<td>
<b>PostgreSQL</b>
<p>Sistema de gestiÃ³n de bases de datos objeto-relacional (ORDBMS) que implementa el estÃ¡ndar SQL:2016. Soporta caracterÃ­sticas avanzadas como tipos de datos personalizados, Ã­ndices parciales y funcionales, procedimientos almacenados en mÃºltiples lenguajes (PL/pgSQL, Python, etc.), replicaciÃ³n streaming, particionado declarativo, y extensiones como PostGIS para datos geoespaciales.</p>
</td>
</tr>
<tr>
<td>
<img src="https://nodejs.org/static/images/logo.svg" alt="Node.js" width="100">
</td>
<td>
<b>Node.js & Vite</b>
<p>Runtime de JavaScript construido sobre el motor V8 de Chrome que utiliza arquitectura event-driven no bloqueante. Vite es un build tool que implementa ES modules nativos, Hot Module Replacement (HMR) instantÃ¡neo, tree-shaking automÃ¡tico, code splitting dinÃ¡mico, y optimizaciÃ³n de bundling con Rollup para producciÃ³n. Soporta TypeScript, JSX y preprocesadores CSS out-of-the-box.</p>
</td>
</tr>
<tr>
<td>
<img src="https://upload.wikimedia.org/wikipedia/commons/9/95/Tailwind_CSS_logo.svg" alt="Tailwind CSS" width="100">
</td>
<td>
<b>Tailwind CSS</b>
<p>Framework CSS utility-first que implementa atomic design principles. Utiliza PostCSS para procesamiento, PurgeCSS para eliminaciÃ³n de CSS no usado, sistema de design tokens configurables, responsive design mobile-first, y JIT (Just-In-Time) compilation para generaciÃ³n dinÃ¡mica de clases. Incluye sistema de componentes reutilizables y variantes condicionales.</p>
</td>
</tr>
<tr>
<td>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b2/Cloudflare_Turnstile_logo.svg/1200px-Cloudflare_Turnstile_logo.svg.png" width="100">
</td>
<td>
<b>Cloudflare Turnstile</b>
<p>Sistema de validaciÃ³n anti-bot que utiliza machine learning y anÃ¡lisis comportamental en lugar de CAPTCHAs tradicionales. Implementa challenge-response protocols invisibles, fingerprinting de dispositivos, anÃ¡lisis de patrones de mouse/teclado, y validaciÃ³n server-side mediante tokens JWT firmados. Reduce la fricciÃ³n del usuario mientras mantiene alta efectividad contra ataques automatizados.</p>
</td>
</tr>
<tr>
<td>
<img src="https://choices-js.github.io/Choices/assets/images/logo.svg" alt="Choices.js" width="80">
</td>
<td>
<b>Choices.js</b>
<p>Biblioteca JavaScript vanilla (sin dependencias) para enhanced select boxes que implementa virtual scrolling para grandes datasets, bÃºsqueda fuzzy, soporte para mÃºltiple selecciÃ³n con tokenizaciÃ³n, customizaciÃ³n completa via CSS variables, accesibilidad ARIA compliant, y API programÃ¡tica para manipulaciÃ³n dinÃ¡mica de opciones. Compatible con frameworks modernos via adaptadores.</p>
</td>
</tr>
</tbody>
</table>

---

## ğŸ“‹ Requisitos Previos

AsegÃºrate de tener instalados los siguientes requisitos en tu entorno de desarrollo:

-   [PHP](https://www.php.net/downloads) (versiÃ³n `>=8.1`)
-   [Composer](https://getcomposer.org/download/)
-   [MySQL](https://www.mysql.com/downloads/) o [PostgreSQL](https://www.postgresql.org/download/)
-   [Node.js](https://nodejs.org/) (versiÃ³n `>=18.0`) y NPM
-   [Credenciales de Cloudflare Turnstile](https://developers.cloudflare.com/turnstile/get-started/)

---

## ğŸš€ InstalaciÃ³n y ConfiguraciÃ³n

Sigue estos pasos para configurar el proyecto en tu mÃ¡quina local.

**1. Clona el repositorio:**

```bash
git clone https://github.com/DJAYI/Atlas
cd Atlas
```

**2. Instala las dependencias de PHP:**

```bash
composer install
```

**3. Configura tu archivo de entorno:**

```bash
cp .env.example .env
```

Abre el archivo `.env` y configura tus variables, especialmente la base de datos, el correo y las claves de Turnstile.

```env
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=hermes_db
DB_USERNAME=root
DB_PASSWORD=

# Claves de Cloudflare Turnstile
TURNSTILE_SITE_KEY=tu_site_key
TURNSTILE_SECRET_KEY=tu_secret_key

# ConfiguraciÃ³n de correo (ej. Mailtrap o SMTP real)
MAIL_MAILER=smtp
MAIL_HOST=sandbox.smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=tu_usuario_mailtrap
MAIL_PASSWORD=tu_contraseÃ±a_mailtrap
MAIL_FROM_ADDRESS="no-reply@tecnologicocomfenalco.edu.co"
MAIL_FROM_NAME="${APP_NAME}"
```

**4. Genera la clave de la aplicaciÃ³n:**

```bash
php artisan key:generate
```

**5. Ejecuta las migraciones y los seeders:**
Esto crearÃ¡ la estructura de la base de datos y la llenarÃ¡ con datos de prueba.

```bash
php artisan migrate --seed
```

**6. Instala las dependencias de Node.js y compila los assets:**

```bash
npm install && npm run build
```

**7. Inicia el servidor de desarrollo:**

```bash
php artisan serve
```

Â¡Listo! La aplicaciÃ³n estarÃ¡ disponible en `http://127.0.0.1:8000`.

---

### ConfiguraciÃ³n Adicional: Certificado SSL (`cacert.pem`)

> Necesario para entornos locales en Windows, configurar el archivo php.ini para realizar peticiones externas.

Para evitar errores de SSL/TLS al conectar con APIs externas (especialmente en Windows), configura el certificado raÃ­z de `curl`.

1.  **Descarga `cacert.pem`** en la carpeta `storage`:
    ```bash
    curl https://curl.se/ca/cacert.pem -o storage/cacert.pem
    ```
2.  **Edita tu `php.ini`** y aÃ±ade las siguientes lÃ­neas (asegÃºrate de usar la ruta absoluta correcta):

    ```ini
    [curl]
    curl.cainfo = "C:/ruta/completa/a/Atlas/storage/cacert.pem"

    [openssl]
    openssl.cafile = "C:/ruta/completa/a/Atlas/storage/cacert.pem"
    ```

---

## ğŸ§ª Testing

El proyecto utiliza Pest para las pruebas automatizadas.

```bash
# Ejecutar todos los tests
php artisan test

# Ejecutar tests con cobertura de cÃ³digo
php artisan test --coverage
```

---

## âš™ï¸ Comandos Ãštiles

### Desarrollo

```bash
# Compilar assets en modo desarrollo con hot-reloading
npm run dev

# Limpiar toda la cachÃ© de Laravel
php artisan optimize:clear
```

### Generadores de CÃ³digo

```bash
# Crear un nuevo componente Livewire
php artisan make:livewire ComponentName

# Crear un nuevo modelo con su migraciÃ³n
php artisan make:model ModelName -m

# Crear una nueva clase de correo electrÃ³nico
php artisan make:mail MailName
```

---

## ğŸ”§ SoluciÃ³n de Problemas Comunes

-   **Error de permisos en `storage` o `bootstrap/cache`:**

    ```bash
    chmod -R 775 storage bootstrap/cache
    ```

-   **Error `cURL error 60: SSL certificate problem`:**
    AsegÃºrate de haber configurado correctamente el `cacert.pem` como se indica en la secciÃ³n de instalaciÃ³n.

-   **Problemas con dependencias (PHP o JS):**

    ```bash
    # Para PHP
    composer dump-autoload

    # Para JS
    rm -rf node_modules package-lock.json
    npm install
    npm run build
    ```

---

## ğŸŒ ConfiguraciÃ³n para ProducciÃ³n (Despliegue)

### Apache

1.  AsegÃºrate de que `mod_rewrite` estÃ© habilitado.

2.  Configura el _Virtual Host_ para que apunte a la carpeta `public`.

3.  Utiliza el siguiente `.htaccess` en la carpeta `public/` (ajusta `RewriteBase` si el proyecto estÃ¡ en un subdirectorio).

    ```apache
    <IfModule mod_rewrite.c>
        RewriteEngine On
        # Si la app estÃ¡ en una subcarpeta (ej. /hermes), descomenta la siguiente lÃ­nea
        # RewriteBase /hermes/public/
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^ index.php [L]
    </IfModule>
    ```

### Nginx

Usa la siguiente configuraciÃ³n de servidor, apuntando la raÃ­z a la carpeta `public/`.

```nginx
server {
    listen 80;
    server_name tu-dominio.com;
    root /var/www/hermes/public; # Ruta a tu proyecto

    index index.php;
    charset utf-8;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location ~ .php$ {
        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock; # Ajusta la versiÃ³n de PHP
        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
        include fastcgi_params;
    }

    location ~ /.ht {
        deny all;
    }
}
```

### OptimizaciÃ³n para ProducciÃ³n

Antes de desplegar, ejecuta estos comandos para optimizar el rendimiento:

```bash
composer install --no-dev --optimize-autoloader
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

---

## ğŸ”„ ConfiguraciÃ³n de Workers (Systemd)

Para procesar tareas en segundo plano (como el envÃ­o de correos) en un servidor Linux, puedes usar `systemd`.

1.  **Crea el archivo de servicio** en `/etc/systemd/system/hermes-worker.service`:

    ```ini
    [Unit]
    Description=Hermes Queue Worker
    After=network.target

    [Service]
    User=root          # Usuario que ejecuta el servidor web (www-data en Debian/Ubuntu)
    Group=root         # Grupo del usuario (www-data en Debian/Ubuntu)
    Restart=always
    ExecStart=/usr/bin/php /var/www/hermes/artisan queue:work --sleep=3 --tries=3
    WorkingDirectory=/var/www/hermes

    [Install]
    WantedBy=multi-user.target
    ```

2.  **Activa e inicia el servicio:**

    ```bash
    # Recargar systemd
    sudo systemctl daemon-reload

    # Habilitar el worker para que inicie con el sistema
    sudo systemctl enable hermes-worker.service

    # Iniciar el worker ahora
    sudo systemctl start hermes-worker.service

    # Verificar el estado
    sudo systemctl status hermes-worker.service
    ```

---

## ğŸ“ Estructura del Proyecto

El proyecto sigue la estructura estÃ¡ndar de Laravel, con algunas adiciones clave para organizar la lÃ³gica de negocio.

```
hermes/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Console/
â”‚   â”œâ”€â”€ Enums/            # Enumeraciones para tipos de datos (Modalidad, UbicaciÃ³n, etc.)
â”‚   â”œâ”€â”€ Exports/          # Clases para exportaciÃ³n de datos (Excel, CSV)
â”‚   â”œâ”€â”€ Http/
â”‚   â”œâ”€â”€ Jobs/             # Tareas en cola (ej. SendSurveyEmailJob)
â”‚   â”œâ”€â”€ Livewire/         # Componentes interactivos de Livewire
â”‚   â”œâ”€â”€ Mail/             # Clases de correo electrÃ³nico
â”‚   â”œâ”€â”€ Models/           # Modelos Eloquent con sus relaciones
â”‚   â”œâ”€â”€ Providers/        # Service Providers personalizados (gestiÃ³n de datos y servicios)
â”‚   â””â”€â”€ Services/         # LÃ³gica de negocio desacoplada
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ factories/
â”‚   â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ seeders/
â”œâ”€â”€ resources/
â”‚   â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ lang/             # Archivos de traducciÃ³n (es, en)
â”‚   â””â”€â”€ views/            # Vistas Blade y componentes
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ auth.php
â”‚   â””â”€â”€ web.php
â””â”€â”€ ...
```

---

## ğŸ”Œ Service Providers Personalizados

El proyecto incluye varios Service Providers especializados que manejan diferentes aspectos de la aplicaciÃ³n:

### ğŸ“ CareerManagementServiceProvider

Gestiona la funcionalidad relacionada con carreras acadÃ©micas:

-   **PropÃ³sito**: Proporciona datos de facultades a los componentes de creaciÃ³n de carreras
-   **Funcionalidad**: Inyecta automÃ¡ticamente la lista de facultades disponibles en los modales de creaciÃ³n
-   **OptimizaciÃ³n**: Solo se ejecuta si la tabla `faculties` existe en la base de datos

### ğŸ“… EventManagementServiceProvider

Administra la lÃ³gica de gestiÃ³n de eventos:

-   **PropÃ³sito**: Centraliza la distribuciÃ³n de datos para eventos y componentes relacionados
-   **Funcionalidad**:
    -   Proporciona listas de actividades, universidades, acuerdos y carreras a los modales de eventos
    -   Comparte datos de eventos con el dashboard principal
-   **OptimizaciÃ³n**: Verifica la existencia de mÃºltiples tablas antes de ejecutarse
-   **Componentes afectados**: `create-event-modal`, `dashboard.index`

### ğŸ›ï¸ UniversityManagementServiceProvider

Maneja la gestiÃ³n de universidades:

-   **PropÃ³sito**: Proporciona datos de paÃ­ses para la creaciÃ³n de universidades
-   **Funcionalidad**: Inyecta la lista de paÃ­ses disponibles en los componentes de gestiÃ³n universitaria
-   **OptimizaciÃ³n**: Solo se activa si la tabla `countries` estÃ¡ disponible

### ğŸ—ºï¸ UniversityAttendanceCoordsServiceProvider

Provider especializado para geocodificaciÃ³n automÃ¡tica:

-   **PropÃ³sito**: Obtiene automÃ¡ticamente coordenadas geogrÃ¡ficas para universidades
-   **Funcionalidad**:
    -   Identifica universidades sin coordenadas que tengan asistentes
    -   Utiliza la API de OpenCage para geocodificaciÃ³n
    -   Actualiza automÃ¡ticamente las coordenadas en la base de datos
-   **OptimizaciÃ³n**:
    -   Se ejecuta mÃ¡ximo una vez por dÃ­a para evitar sobrecarga
    -   Implementa cache para evitar peticiones duplicadas a la API
    -   Solo procesa universidades con asistencias registradas
-   **ConfiguraciÃ³n requerida**: Variable de entorno `OPENCAGE_API_KEY`

### ğŸ”§ CaracterÃ­sticas TÃ©cnicas de los Providers

**VerificaciÃ³n de Tablas**: Todos los providers verifican la existencia de las tablas necesarias antes de ejecutarse, evitando errores durante migraciones o en entornos de desarrollo.

**ComposiciÃ³n de Vistas**: Utilizan `View::composer()` para inyectar datos automÃ¡ticamente en componentes especÃ­ficos, reduciendo la duplicaciÃ³n de cÃ³digo.

**OptimizaciÃ³n de Rendimiento**: Implementan estrategias de cache y verificaciones condicionales para minimizar el impacto en el rendimiento.

**SeparaciÃ³n de Responsabilidades**: Cada provider maneja un dominio especÃ­fico de la aplicaciÃ³n, facilitando el mantenimiento y testing.
